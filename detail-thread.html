<html>

<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./assets/css/beranda.css" />
  <script src="https://cdn.jsdelivr.net/npm/@kontenbase/sdk"></script>
  <title>Detail Thread</title>
</head>

<body>
  <nav class="navbar">
    <div class="left">
      <a href="beranda.html">
        <i class="fa-brands fa-twitter"></i>
      </a>
    </div>

    <div class="middle">
      <input type="text" placeholder="explore" id="search" onkeypress="search(event)" />
    </div>

    <div class="right">
      <a href="verification.html">
        <i class="fa-solid fa-circle-check"></i>
      </a>
      <a class="logout" href="#">Logout</a>
      <i class="fa-solid fa-expand"></i>
    </div>
  </nav>

  <div class="content">
    <div class="left-side">
      <div class="card profile">
        <div class="banner">
          <img src="./assets/img/backdrop.jpg" alt="" />
        </div>
        <div class="biodata">
          <img src="./assets/img/profile.jpg" alt="" id="avatar-profile" />
          <h3 id="fullname">Ilham Fathullah</h3>
          <p class="username" id="username">@ilfat_fathul</p>
          <p class="bio" id="biodata">Play Hard, Study Hard, Istira Hard</p>
        </div>
        <hr />
        <div class="follow">
          <div class="following">
            <h2>57k</h2>
            <p>following</p>
          </div>
          <div class="followers">
            <h2>282</h2>
            <p>followers</p>
          </div>
        </div>
        <hr />
        <a href="edit-profile.html">Edit Profile</a>
        <hr />
        <a href="my-thread.html">My Thread</a>
      </div>

      <div class="card list-follow p-20">
        <h3>Who is to follow you</h3>

        <div class="list-suggest">
          <div class="suggest">
            <div class="avatar">
              <img src="./assets/img/profile.jpg" alt="" />
            </div>

            <div class="account">
              <a href=""> Steve Rogers </a>
              <p>@steve_r</p>
            </div>

            <div class="btn-follow">
              <button>Follow</button>
            </div>
          </div>
          <div class="suggest">
            <div class="avatar">
              <img src="./assets/img/profile.jpg" alt="" />
            </div>
            <div class="account">
              <a href=""> Steve Rogers </a>
              <p>@steve_r</p>
            </div>
            <div class="btn-follow">
              <button>Follow</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="middle-side" id="middle-side">
      <div class="card p-20 post-thread" id="thread-detail"></div>
      <div class="card p-20 comment-thread mt-4" id="comment-thread">
        <form class="right">
          <textarea id="comment-message" placeholder="Write your comment" rows="5"></textarea>
          <div class="btn-publish text-right">
            <button type="button" onclick="commentThread()">Comment</button>
          </div>
        </form>
        <div id="comment-list"></div>
      </div>
    </div>

    <div class="right-side">
      <div class="card p-20">
        <h3>Trend for you</h3>
        <div class="list-trend">
          <div class="trend">
            <div class="left-trend">
              <a href="">
                <h4>#SpiderMan</h4>
              </a>
              <p>87K Tweets</p>
            </div>
            <div class="right-trend">
              <i class="fa-solid fa-ellipsis"></i>
            </div>
          </div>
          <div class="trend">
            <div class="left-trend">
              <a href="">
                <h4>#SpiderMan</h4>
              </a>
              <p>87K Tweets</p>
            </div>
            <div class="right-trend">
              <i class="fa-solid fa-ellipsis"></i>
            </div>
          </div>
          <div class="trend">
            <div class="left-trend">
              <a href="">
                <h4>#SpiderMan</h4>
              </a>
              <p>87K Tweets</p>
            </div>
            <div class="right-trend">
              <i class="fa-solid fa-ellipsis"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="./assets/js/detail-thread.js"></script>
  <script src="./assets/js/search.js"></script>
</body>

</html>

<div class="card p-20 view-thread" onclick="location.href='detail-thread.html?id=${threads[i]._id}'">
  <div class="left">
    <img src="${threads[i].owner.avatar[0].url}" alt="">
  </div>
  <div class="right">
    <div class="top">
      <div class="profile-user">
        <div onclick="location.href = 'another-user.html?id=${threads[i].owner._id}'; event.stopPropagation()">
          <h3>${threads[i].owner.firstName}</h3>
          <span>${threads[i].owner.username}</span>
        </div>
        <span>33 minutes ago</span>
      </div>
      <div class="options">
        <i class="fa-solid fa-ellipsis"></i>
      </div>
    </div>
    <div class="content-thread">
      <p>
        ${threads[i].content}
      </p>
      <a onclick="navigateHastag('${threads[i].hastag}'); event.stopPropagation()">
        <p>
          #${threads[i].hastag}
        </p>
      </a>
      ${threads[i].photo ? `<img src=" ${threads[i].photo[0].url}" alt="">` : ''}
    </div>
    <div class="bottom">
      <div class="react-view">
        <div class="react-group">
          <i class="fa-solid fa-heart"></i><span>${await getThreadLike(threads[i]._id)}</span>
        </div>
        <div class="react-group">
          <i class="fa-solid fa-comment-dots"></i><span>${await getThreadCommentCount(threads[i]._id)}</span>
        </div>
      </div>
      <div class="react-button">
        ${(await checkUserLike(threads[i]._id)) ?
        `
        <button class="btn-dislike" onclick="dislikeThread('${threads[i]._id}'); event.stopPropagation()">
          <i class="fa-solid fa-heart"></i> Like
        </button>
        `
        :
        `
        <button class="btn-like" onclick="likeThread('${threads[i]._id}'); event.stopPropagation()">
          <i class="fa-solid fa-heart"></i> Like
        </button>
        `
        }
        <button class="btn-comment">
          <i class=" fa-solid fa-comment-dots"></i> Comment
        </button>
      </div>
    </div>
  </div>
</div>